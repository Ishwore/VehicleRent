{"ast":null,"code":"var _jsxFileName = \"/home/ishwore/Documents/VehicleRent/front-end/src/screen/Khalti.js\";\nimport React from \"react\";\nimport KhaltiCheckout from \"khalti-checkout-web\";\n// import axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KhaltiPaymentComponent = ({\n  id,\n  name,\n  vid\n}) => {\n  const auth = localStorage.getItem('user');\n  // const verify = async (payload) => {\n  //     let data = {\n  //         \"token\": payload.token,\n  //         \"amount\": payload.amount\n  //     };\n\n  //     let configs = {\n  //         headers: { 'Authorization': 'Key test_secret_key_5718c104157c4cea8676a8681a53ace8' }\n  //     };\n  //     let apturl = \"https://khalti.com/api/v2/payment/status/\"\n  //     axios.get(apturl, data, configs)\n  //         .then(response => {\n  //             console.log(response.data);\n  //         })\n  //         .catch(error => {\n  //             console.log(error);\n  //         });\n  //     // const response = await axios.post(`https://khalti.com/api/v2/payment/verify/`, data, configs);\n  //     // const result = await response.json();\n  //     // console.log(result);\n  // }\n\n  const handlePayment = () => {\n    const config = {\n      publicKey: \"test_public_key_20ba6979112a4822bc3bdcb767d84dcf\",\n      productIdentity: `${vid}`,\n      productName: `${name}`,\n      productUrl: `http://localhost:3000/veiwbookingdetails/${id}`,\n      eventHandler: {\n        onSuccess: payload => {\n          console.log(payload);\n          const result = fetch(\"http://localhost:5000/api/khalti\", {\n            method: 'post',\n            body: JSON.stringify({\n              payload\n            }),\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${JSON.parse(auth).token}`\n            }\n          });\n          const resultData = result.json();\n          console.warn(resultData);\n        },\n        onError: error => {\n          console.log(error);\n        },\n        onClose: () => {\n          console.log(\"widget is closing\");\n        }\n      },\n      paymentPreference: [\"KHALTI\"]\n    };\n    const checkout = new KhaltiCheckout(config);\n    checkout.show({\n      amount: 10000\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    id: \"payment-button \",\n    className: \"bg-red-500 rounded-2xl px-3 py-2 text-white\",\n    onClick: handlePayment,\n    children: \"Pay with Khalti\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_c = KhaltiPaymentComponent;\nexport default KhaltiPaymentComponent;\nvar _c;\n$RefreshReg$(_c, \"KhaltiPaymentComponent\");","map":{"version":3,"names":["React","KhaltiCheckout","jsxDEV","_jsxDEV","KhaltiPaymentComponent","id","name","vid","auth","localStorage","getItem","handlePayment","config","publicKey","productIdentity","productName","productUrl","eventHandler","onSuccess","payload","console","log","result","fetch","method","body","JSON","stringify","headers","Authorization","parse","token","resultData","json","warn","onError","error","onClose","paymentPreference","checkout","show","amount","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/ishwore/Documents/VehicleRent/front-end/src/screen/Khalti.js"],"sourcesContent":["import React from \"react\";\nimport KhaltiCheckout from \"khalti-checkout-web\";\n// import axios from \"axios\";\n\nconst KhaltiPaymentComponent = ({ id, name, vid }) => {\n    const auth = localStorage.getItem('user');\n    // const verify = async (payload) => {\n    //     let data = {\n    //         \"token\": payload.token,\n    //         \"amount\": payload.amount\n    //     };\n\n    //     let configs = {\n    //         headers: { 'Authorization': 'Key test_secret_key_5718c104157c4cea8676a8681a53ace8' }\n    //     };\n    //     let apturl = \"https://khalti.com/api/v2/payment/status/\"\n    //     axios.get(apturl, data, configs)\n    //         .then(response => {\n    //             console.log(response.data);\n    //         })\n    //         .catch(error => {\n    //             console.log(error);\n    //         });\n    //     // const response = await axios.post(`https://khalti.com/api/v2/payment/verify/`, data, configs);\n    //     // const result = await response.json();\n    //     // console.log(result);\n    // }\n\n    const handlePayment = () => {\n        const config = {\n            publicKey: \"test_public_key_20ba6979112a4822bc3bdcb767d84dcf\",\n            productIdentity: `${vid}`,\n            productName: `${name}`,\n            productUrl: `http://localhost:3000/veiwbookingdetails/${id}`,\n            eventHandler: {\n                onSuccess: (payload) => {\n                    console.log(payload);\n                    const result = fetch(\"http://localhost:5000/api/khalti\", {\n                        method: 'post',\n                        body: JSON.stringify({ payload }),\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${JSON.parse(auth).token}`,\n                        },\n                    });\n                    const resultData = result.json();\n                    console.warn(resultData);\n\n                },\n                onError: (error) => {\n                    console.log(error);\n                },\n                onClose: () => {\n                    console.log(\"widget is closing\");\n                },\n            },\n            paymentPreference: [\"KHALTI\"],\n        };\n\n        const checkout = new KhaltiCheckout(config);\n        checkout.show({ amount: 10000 });\n    };\n\n    return (\n        <button id=\"payment-button \" className=\"bg-red-500 rounded-2xl px-3 py-2 text-white\" onClick={handlePayment}>\n            Pay with Khalti\n        </button>\n    );\n};\n\nexport default KhaltiPaymentComponent;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,cAAc,MAAM,qBAAqB;AAChD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEA,MAAMC,sBAAsB,GAAGA,CAAC;EAAEC,EAAE;EAAEC,IAAI;EAAEC;AAAI,CAAC,KAAK;EAClD,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACzC;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IACxB,MAAMC,MAAM,GAAG;MACXC,SAAS,EAAE,kDAAkD;MAC7DC,eAAe,EAAG,GAAEP,GAAI,EAAC;MACzBQ,WAAW,EAAG,GAAET,IAAK,EAAC;MACtBU,UAAU,EAAG,4CAA2CX,EAAG,EAAC;MAC5DY,YAAY,EAAE;QACVC,SAAS,EAAGC,OAAO,IAAK;UACpBC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;UACpB,MAAMG,MAAM,GAAGC,KAAK,CAAC,kCAAkC,EAAE;YACrDC,MAAM,EAAE,MAAM;YACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;cAAER;YAAQ,CAAC,CAAC;YACjCS,OAAO,EAAE;cACL,cAAc,EAAE,kBAAkB;cAClCC,aAAa,EAAG,UAASH,IAAI,CAACI,KAAK,CAACtB,IAAI,CAAC,CAACuB,KAAM;YACpD;UACJ,CAAC,CAAC;UACF,MAAMC,UAAU,GAAGV,MAAM,CAACW,IAAI,CAAC,CAAC;UAChCb,OAAO,CAACc,IAAI,CAACF,UAAU,CAAC;QAE5B,CAAC;QACDG,OAAO,EAAGC,KAAK,IAAK;UAChBhB,OAAO,CAACC,GAAG,CAACe,KAAK,CAAC;QACtB,CAAC;QACDC,OAAO,EAAEA,CAAA,KAAM;UACXjB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;QACpC;MACJ,CAAC;MACDiB,iBAAiB,EAAE,CAAC,QAAQ;IAChC,CAAC;IAED,MAAMC,QAAQ,GAAG,IAAItC,cAAc,CAACW,MAAM,CAAC;IAC3C2B,QAAQ,CAACC,IAAI,CAAC;MAAEC,MAAM,EAAE;IAAM,CAAC,CAAC;EACpC,CAAC;EAED,oBACItC,OAAA;IAAQE,EAAE,EAAC,iBAAiB;IAACqC,SAAS,EAAC,6CAA6C;IAACC,OAAO,EAAEhC,aAAc;IAAAiC,QAAA,EAAC;EAE7G;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEjB,CAAC;AAACC,EAAA,GAhEI7C,sBAAsB;AAkE5B,eAAeA,sBAAsB;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}