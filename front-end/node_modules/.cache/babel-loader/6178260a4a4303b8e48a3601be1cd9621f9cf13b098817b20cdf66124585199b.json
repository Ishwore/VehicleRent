{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst tslib_1 = require(\"tslib\");\nconst cloneDeep_1 = (0, tslib_1.__importDefault)(require(\"lodash/cloneDeep\"));\nconst isPlainObject_1 = (0, tslib_1.__importDefault)(require(\"lodash/isPlainObject\"));\nconst isNil_1 = (0, tslib_1.__importDefault)(require(\"lodash/isNil\"));\nconst isFunction_1 = (0, tslib_1.__importDefault)(require(\"lodash/isFunction\"));\nconst get_1 = (0, tslib_1.__importDefault)(require(\"lodash/get\"));\nconst setValue = function (value, keyParts, fieldValue) {\n  const key = keyParts.shift();\n  if (keyParts.length === 0) {\n    value[key] = fieldValue;\n  } else {\n    if (!isNaN(keyParts[0])) {\n      if ((0, isNil_1.default)(value[key])) {\n        value[key] = [];\n      }\n    } else {\n      if ((0, isNil_1.default)(value[key])) {\n        value[key] = {};\n      }\n      if (!(0, isPlainObject_1.default)(value[key])) {\n        throw new Error(`Expected plain object for key ${key}`);\n      }\n    }\n    setValue(value[key], keyParts, fieldValue);\n  }\n};\nfunction default_1(val, fieldName, fieldValue) {\n  const value = (0, cloneDeep_1.default)(val);\n  const keyParts = fieldName.split('.');\n  if ((0, isFunction_1.default)(fieldValue)) {\n    const oldValue = (0, get_1.default)(value, fieldName);\n    const newValue = fieldValue(oldValue);\n    setValue(value, keyParts, newValue);\n  } else {\n    setValue(value, keyParts, fieldValue);\n  }\n  return value;\n}\nexports.default = default_1;","map":{"version":3,"names":["cloneDeep_1","tslib_1","__importDefault","require","isPlainObject_1","isNil_1","isFunction_1","get_1","setValue","value","keyParts","fieldValue","key","shift","length","isNaN","default","Error","default_1","val","fieldName","split","oldValue","newValue","exports"],"sources":["../../src/Form/getNewValue.tsx"],"sourcesContent":[null],"mappings":";;;;;;AAAA,MAAAA,WAAA,OAAAC,OAAA,CAAAC,eAAA,EAAAC,OAAA;AACA,MAAAC,eAAA,OAAAH,OAAA,CAAAC,eAAA,EAAAC,OAAA;AACA,MAAAE,OAAA,OAAAJ,OAAA,CAAAC,eAAA,EAAAC,OAAA;AACA,MAAAG,YAAA,OAAAL,OAAA,CAAAC,eAAA,EAAAC,OAAA;AACA,MAAAI,KAAA,OAAAN,OAAA,CAAAC,eAAA,EAAAC,OAAA;AAEA,MAAMK,QAAQ,GAAG,SAAAA,CAAUC,KAAK,EAAEC,QAAQ,EAAEC,UAAU;EACpD,MAAMC,GAAG,GAAGF,QAAQ,CAACG,KAAK,EAAE;EAC5B,IAAIH,QAAQ,CAACI,MAAM,KAAK,CAAC,EAAE;IACzBL,KAAK,CAACG,GAAG,CAAC,GAAGD,UAAU;GACxB,MAAM;IACL,IAAI,CAACI,KAAK,CAACL,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE;MAEvB,IAAI,IAAAL,OAAA,CAAAW,OAAK,EAACP,KAAK,CAACG,GAAG,CAAC,CAAC,EAAE;QACrBH,KAAK,CAACG,GAAG,CAAC,GAAG,EAAE;;KAElB,MAAM;MACL,IAAI,IAAAP,OAAA,CAAAW,OAAK,EAACP,KAAK,CAACG,GAAG,CAAC,CAAC,EAAE;QACrBH,KAAK,CAACG,GAAG,CAAC,GAAG,EAAE;;MAEjB,IAAI,CAAC,IAAAR,eAAA,CAAAY,OAAa,EAACP,KAAK,CAACG,GAAG,CAAC,CAAC,EAAE;QAC9B,MAAM,IAAIK,KAAK,CAAC,iCAAiCL,GAAG,EAAE,CAAC;;;IAG3DJ,QAAQ,CAACC,KAAK,CAACG,GAAG,CAAC,EAAEF,QAAQ,EAAEC,UAAU,CAAC;;AAE9C,CAAC;AAED,SAAAO,UAAyBC,GAAG,EAAEC,SAAS,EAAET,UAAU;EACjD,MAAMF,KAAK,GAAG,IAAAT,WAAA,CAAAgB,OAAS,EAACG,GAAG,CAAC;EAC5B,MAAMT,QAAQ,GAAGU,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC;EAErC,IAAI,IAAAf,YAAA,CAAAU,OAAU,EAACL,UAAU,CAAC,EAAE;IAC1B,MAAMW,QAAQ,GAAG,IAAAf,KAAA,CAAAS,OAAG,EAACP,KAAK,EAAEW,SAAS,CAAC;IACtC,MAAMG,QAAQ,GAAGZ,UAAU,CAACW,QAAQ,CAAC;IACrCd,QAAQ,CAACC,KAAK,EAAEC,QAAQ,EAAEa,QAAQ,CAAC;GACpC,MAAM;IACLf,QAAQ,CAACC,KAAK,EAAEC,QAAQ,EAAEC,UAAU,CAAC;;EAGvC,OAAOF,KAAK;AACd;AAbAe,OAAA,CAAAR,OAAA,GAAAE,SAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}