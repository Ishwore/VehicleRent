{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst tslib_1 = require(\"tslib\");\nconst react_1 = (0, tslib_1.__importDefault)(require(\"react\"));\nconst isArray_1 = (0, tslib_1.__importDefault)(require(\"lodash/isArray\"));\nconst without_1 = (0, tslib_1.__importDefault)(require(\"lodash/without\"));\nconst Object_1 = (0, tslib_1.__importDefault)(require(\"../Object\"));\nconst Field_1 = (0, tslib_1.__importDefault)(require(\"../Field\"));\nconst Contexts_1 = require(\"../Contexts\");\nconst defaultProps = {\n  addLabel: 'Add',\n  removeLabel: 'Remove',\n  errorMessages: {},\n  autoAddItem: false,\n  showAddButton: true,\n  showRemoveButton: true,\n  renderProps: false\n};\nclass ArrayComponent extends react_1.default.Component {\n  addItem() {\n    let itemValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var newArray = this.props.value;\n    if ((0, isArray_1.default)(newArray)) {\n      newArray.push(itemValue);\n    } else {\n      newArray = [itemValue];\n    }\n    this.props.onChange(newArray);\n  }\n  getObjectField() {\n    return Object_1.default;\n  }\n  removeItem(index) {\n    const value = this.props.value || [];\n    var newArray = (0, without_1.default)(value, value[index]);\n    this.props.onChange(newArray);\n  }\n  getChildrenComponents(item, index) {\n    if (this.props.renderItem) return this.props.renderItem(item, index);\n    if (this.props.children) return this.props.children;\n  }\n  renderChildren() {\n    const value = this.props.value || [];\n    if (this.props.autoAddItem && !this.props.disabled && value.length === 0) {\n      value.push({});\n    }\n    return value.map((item, index) => {\n      const children = this.getChildrenComponents(item, index);\n      return this.renderChildrenItem({\n        index,\n        children\n      });\n    });\n  }\n  renderChildrenItem(_ref) {\n    let {\n      index,\n      children\n    } = _ref;\n    const button = this.props.showRemoveButton ? this.renderButton(() => this.removeItem(index), this.props.removeLabel, 'srf_removeButton') : null;\n    return react_1.default.createElement(\"div\", {\n      style: {\n        marginTop: 20,\n        marginBottom: 20,\n        padding: 20\n      },\n      key: `${this.props.fieldName}.${index}`\n    }, this.renderChildrenItemWithContext({\n      index,\n      children\n    }), button);\n  }\n  renderChildrenItemWithContext(_ref2) {\n    let {\n      index,\n      children\n    } = _ref2;\n    return react_1.default.createElement(Contexts_1.ParentFieldNameContext.Provider, {\n      key: index,\n      value: this.props.fieldName\n    }, react_1.default.createElement(Field_1.default, {\n      fieldName: String(index),\n      type: this.getObjectField()\n    }, this.props.renderProps ? children(index) : children));\n  }\n  renderButton(onClick, label, className) {\n    return react_1.default.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      }\n    }, react_1.default.createElement(\"button\", {\n      type: \"button\",\n      className: className,\n      onClick: onClick\n    }, label));\n  }\n  renderErrorMessage() {\n    if (!this.props.errorMessage) return;\n    return react_1.default.createElement(\"div\", {\n      style: {\n        color: 'red'\n      },\n      className: \"srf_errorMessage\"\n    }, this.props.errorMessage);\n  }\n  render() {\n    return react_1.default.createElement(\"div\", {\n      className: \"srf-array-container\",\n      style: {\n        marginTop: 20\n      }\n    }, react_1.default.createElement(\"div\", null, react_1.default.createElement(\"b\", null, this.props.label)), this.renderErrorMessage(), this.renderChildren(), this.props.showAddButton ? this.renderButton(() => this.addItem(), this.props.addLabel, 'srf_addButton') : null);\n  }\n}\nexports.default = ArrayComponent;\nArrayComponent.defaultProps = defaultProps;","map":{"version":3,"names":["react_1","tslib_1","__importDefault","require","isArray_1","without_1","Object_1","Field_1","Contexts_1","defaultProps","addLabel","removeLabel","errorMessages","autoAddItem","showAddButton","showRemoveButton","renderProps","ArrayComponent","default","Component","addItem","itemValue","arguments","length","undefined","newArray","props","value","push","onChange","getObjectField","removeItem","index","getChildrenComponents","item","renderItem","children","renderChildren","disabled","map","renderChildrenItem","_ref","button","renderButton","createElement","style","marginTop","marginBottom","padding","key","fieldName","renderChildrenItemWithContext","_ref2","ParentFieldNameContext","Provider","String","type","onClick","label","className","renderErrorMessage","errorMessage","color","render","exports"],"sources":["../../src/Array/index.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}