{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst tslib_1 = require(\"tslib\");\nconst react_1 = (0, tslib_1.__importStar)(require(\"react\"));\nconst omit_1 = (0, tslib_1.__importDefault)(require(\"lodash/omit\"));\nconst get_1 = (0, tslib_1.__importDefault)(require(\"lodash/get\"));\nconst Contexts_1 = require(\"../Contexts\");\nconst types_1 = require(\"../types\");\nfunction FieldInner(props, ref) {\n  const parentValue = (0, react_1.useContext)(Contexts_1.ValueContext);\n  const errorMessages = (0, react_1.useContext)(Contexts_1.ErrorMessagesContext) || {};\n  const onChange = (0, react_1.useContext)(Contexts_1.OnChangeContext);\n  const parentFieldName = (0, react_1.useContext)(Contexts_1.ParentFieldNameContext);\n  const fieldName = (0, react_1.useMemo)(() => {\n    if (parentFieldName) {\n      if (props.fieldName) {\n        return `${parentFieldName}.${props.fieldName}`;\n      } else {\n        return parentFieldName;\n      }\n    } else {\n      return props.fieldName;\n    }\n  }, [parentFieldName, props.fieldName]);\n  const errorMessage = (0, react_1.useMemo)(() => {\n    return props.errorMessage || errorMessages[fieldName] || (0, get_1.default)(errorMessages, fieldName);\n  }, [fieldName, props.errorMessage, errorMessages]);\n  const childProps = (0, react_1.useMemo)(() => {\n    const propOptions = (0, omit_1.default)(props, ['fieldName', 'type', 'errorMessage']);\n    const allowedKeys = [...types_1.fieldPropsKeys, 'type'];\n    const passProps = (0, omit_1.default)(propOptions, allowedKeys);\n    return {\n      ...propOptions,\n      value: (0, get_1.default)(parentValue || {}, props.fieldName),\n      parentValue: parentValue || {},\n      onChange: newValue => {\n        return onChange(fieldName, newValue);\n      },\n      errorMessage,\n      fieldName,\n      passProps\n    };\n  }, [props, parentValue, fieldName, errorMessage]);\n  const Component = props.type;\n  const componentRef = Component.prototype.render ? ref : null;\n  return react_1.default.createElement(Contexts_1.ValueContext.Provider, {\n    value: childProps.value\n  }, react_1.default.createElement(Contexts_1.ParentFieldNameContext.Provider, {\n    value: childProps.fieldName\n  }, react_1.default.createElement(Component, {\n    ...childProps,\n    ref: componentRef\n  })));\n}\nconst Field = (0, react_1.forwardRef)(FieldInner);\nexports.default = Field;","map":{"version":3,"names":["react_1","tslib_1","__importStar","require","omit_1","__importDefault","get_1","Contexts_1","types_1","FieldInner","props","ref","parentValue","useContext","ValueContext","errorMessages","ErrorMessagesContext","onChange","OnChangeContext","parentFieldName","ParentFieldNameContext","fieldName","useMemo","errorMessage","default","childProps","propOptions","allowedKeys","fieldPropsKeys","passProps","value","newValue","Component","type","componentRef","prototype","render","createElement","Provider","Field","forwardRef","exports"],"sources":["../../src/Field/index.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}